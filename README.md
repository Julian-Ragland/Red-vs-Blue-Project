# Red-vs-Blue-Project

In Project 2 of the Cybersecurity Bootcamp at UC-Berkeley we were tasked with gaining root access to a web server and finding the flag that was within it.  

We first started our reconnaissance by using  a NMAP service scan on the subnet 192.168.1.1/24 to discover all machines belonging to said network. We found three machines and a gateway. Our own Kali Linux Machine, an Elk Server, a network gateway and a Ubuntu Web Server which was hosting a database. We were tasked with infiltrating the web server. With this we were tasked with using hydra, crack station, msfvenom and the msfconsole to establish a Meterpreter Reverse TCP (Transmission Control Protocol) Shell and extract the flag that was inside the web server. We used these tools to bypass authentication security which was installed in several places on the webserver. 

After establishing the IP address of the web server using NMAP service scan -sV we used a web browser to visit the server.  We then started to explore the site and saw that on some pages gave us manage “ERROR: company_folders/secret_folder/ is no longer accessible to the public”. We then typed in 192.168.1.105/company_folders/secret_folder/ and discovered that there was it was a password protected folder. Using the information we discovered in the company directory folder using the rockyou.txt wordlist as a base. The command we used to brute force the password for Ashton was “hydra -l ashton -P /usr/share/wordlists/rockyou.txt -s 80 -f -vV 192.168.1.105 http-get /company_folders/secret_folder”. Once we found the password, we discovered instructions on how to connect to the webserver via Web Dav / FTP from a basic Kali Linux File Browser. We also discovered a hash for another users password (Ryan) that was the login for the Web DAV. It was in hash form so we used Crack Station to decipher it. Once doing this we connected to the web server from our Kali file browser by entering dav://192.168.1.105/webdav. We then used MSFVENOM to create a TCP Reverse Shell Payload script. We did this so we could run the script directly from the web browser. We created the payload then copied it over to file browser that was connected to the web server and uploaded it. We then set up our listener in msfconsole in Kali Linux and had it listen for connects and then ran the script using our web browser. We then established a Meterpreter session and were able to find the flag located in the root directory.

Our methods in accomplishing this were not covert, as we were able to see everything that we did using Kibana. We were able to see the NMAP Scan, the brute force attack on the Secret Folder as well as our connection with Web DAV. 

If we wanted to do this with greater stealth I would suggest the following. I would do a NMAP stealth scan using the -sS to make sure we don’t pop up on the logs. Once we did this. I would suggest first compromising the Elk Server and taking down Kibana server so that it doesn’t log our activity. We could accomplish this by modifying the IP Address in (Filebeat, Metric Beat, etc)  so that it wouldn’t collect logs from our target. We would then perform the same steps that I mentioned before to establish a metepreter shell. Once we were finished running the exploit and no longer needed access to the machine, we would reconfig the modified config  files on the elk server to start collecting logs from the web server so that it would look like a momententary drop.
